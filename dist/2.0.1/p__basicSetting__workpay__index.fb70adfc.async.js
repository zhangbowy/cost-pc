(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"3uzT":function(e,t,a){"use strict";a.r(t);a("5Dmo");var n=a("3S7+"),o=(a("DZo9"),a("8z0m")),c=(a("+L6B"),a("2/Rp")),l=(a("miYZ"),a("tsqr")),r=(a("FJo9"),a("L41K")),s=a("qIgq"),m=a.n(s),i=a("q1tI"),p=a.n(i),u=a("/MKj"),d=a("ydnR"),f=a("PeHD"),y=a("D1Df"),g=a.n(y),E=a("KtMI"),I=a("ZaSK"),h=a.n(I),x=a("WYR1");function b(e){var t=d["r"].APP_API,a=e.dispatch,s=e.userInfo,u=Object(i["useState"])(!1),y=m()(u,2),I=y[0],b=y[1],_=Object(i["useState"])([]),k=m()(_,2),N=k[0],v=k[1],w=Object(i["useState"])(!1),S=m()(w,2),A=S[0],C=S[1],R=Object(i["useState"])(1),T=m()(R,2),j=T[0],O=T[1],z=Object(i["useState"])(""),M=m()(z,2),L=M[0],q=M[1],D=Object(i["useState"])(""),U=m()(D,2),W=U[0],F=U[1],K=Object(i["useState"])(0),P=m()(K,2),J=P[0],Z=P[1],B=Object(i["useState"])(0),G=m()(B,2),H=G[0],Y=G[1],Q=r["a"].Step,V={name:"file",showUploadList:{showPreviewIcon:!0,showRemoveIcon:!1,showDownloadIcon:!1},action:"".concat(t,"/cost/workPay/import/userInfoExcel?token=").concat(localStorage.getItem("token")),beforeUpload:function(e){return e.name.indexOf(".xlsx")===e.name.length-5||(l["a"].error("\u53ea\u80fd\u4e0a\u4f20xlsx\u683c\u5f0f\u7684\u6587\u4ef6!"),!1)},onChange:function(e){if("uploading"!==e.file.status&&e.fileList.length&&e.fileList.splice(0,1),"done"===e.file.status)if(a({type:"controller/getImportInfo",payload:{companyId:s.companyId},callback:function(e){1!==e&&v(!0)}}),e.file.response&&e.file.response.result){var t=e.file.response.result;F(t.failFileId),Z(t.failNum),Y(t.successNum),l["a"].success("\u6210\u529f\u5bfc\u5165".concat(t.successNum,"\u6761\uff0c\u5931\u8d25").concat(t.failNum,"\u6761")),a({type:"controller/getImportInfo",payload:{companyId:s.companyId},callback:function(e){console.log("getImportInfo",e),v(e)}})}else l["a"].error(e.file.response.message);else"error"===e.file.status&&(e.file.response&&e.file.response.result?l["a"].error(e.file.response.result.message):l["a"].error("\u5bfc\u5165\u5931\u8d25"))}},X=function(){return N.lastImportTime?"".concat(Object(f["a"])(N.lastImportTime,"yyyy-MM-dd hh:mm"),"\uff0c\u7d2f\u8ba1\u5bfc\u5165\u4eba\u6570\uff1a").concat(N.importNum,"\u4eba")+"\uff0c\u5f00\u901a\u4eba\u6570\uff1a".concat(N.openNum,"\u4eba"):"\u65e0"},$=function(){a({type:"controller/getCompanyAuthResult",payload:{companyId:s.companyId},callback:function(e){1===e.isAuthor?O(j+1):l["a"].error("\u8bf7\u5148\u6388\u6743")}})},ee=function(){N.importNum?a({type:"controller/complete",payload:{companyId:s.companyId}}).then(function(){b(!0)}):l["a"].error("\u8bf7\u5bfc\u5165\u5458\u5de5\u4fe1\u606f")},te=[{title:"\u652f\u4ed8\u5b9d\u7ebf\u4e0b\u7b7e\u7ea6",content:p.a.createElement("div",null),status:"process",description:p.a.createElement("span",{style:{color:"#00C795",fontSize:"12px",cursor:"pointer"},onClick:function(){window.open("https://www.yuque.com/docs/share/09880e09-a80a-410a-86c6-7a7c7f31dc9a?#")}},"\u5982\u4f55\u7b7e\u7ea6\uff1f")},{title:"\u4f01\u4e1a\u8d26\u53f7\u6388\u6743",status:"process",content:p.a.createElement("div",null,p.a.createElement("p",{className:h.a.testMessage},p.a.createElement("span",{className:h.a.btn},"i"),p.a.createElement("span",{style:{fontWeight:"400"}},"\u5982\u4f60\u5df2\u7ebf\u4e0b\u7b7e\u7ea6\u82b1\u5457\u5de5\u4f5c\u82b1\uff0c\u8bf7\u4f7f\u7528"),p.a.createElement("span",{style:{fontWeight:"650"}},"\u4f01\u4e1a\u652f\u4ed8\u5b9d\u8d26\u53f7"),p.a.createElement("span",{style:{fontWeight:"400"}},"\u626b\u7801\u6388\u6743")),p.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},p.a.createElement("span",{style:{display:"inline-block",padding:"22px",borderRadius:"2px",boxShadow:"0px 0px 6px 0px rgba(29, 17, 86, 0.12)"}},p.a.createElement(g.a,{value:L,size:130}),",")),p.a.createElement("div",{style:{textAlign:"center",marginTop:"33px"}},p.a.createElement(c["a"],{type:"primary",onClick:function(){return $()}},"\u4e0b\u4e00\u6b65"))),description:p.a.createElement("span",{style:{fontSize:"12px",color:"rgba(0,0,0,0.36)"}},"\u4f7f\u7528\u4f01\u4e1a\u5df2\u7b7e\u7ea6\u652f\u4ed8\u5b9d\u6388\u6743")},{title:"\u5f55\u5165\u5458\u5de5\u4fe1\u606f",content:p.a.createElement("div",null,p.a.createElement("p",{className:h.a.testMessage},p.a.createElement("span",{className:h.a.btn},"i"),p.a.createElement("span",{style:{fontWeight:"650"}},"\u8bf7\u786e\u4fdd\u6b63\u786e\u7684\u5458\u5de5\u4fe1\u606f"),p.a.createElement("span",{style:{fontWeight:"400"}},"\u4fe1\u606f\u51c6\u786e\u6027\u5c06\u5f71\u54cd\u82b1\u5457\u63d0\u989d\u989d\u5ea6")),p.a.createElement("p",{className:h.a.contentItem},"\u6279\u91cf\u5bfc\u5165\u5458\u5de5\u4fe1\u606f\uff0c\u8bf7\u5148",p.a.createElement("a",{href:"".concat(t,"/cost/export/userInfo/template?token=").concat(localStorage.getItem("token")),style:{color:"#00C795"}},"\u4e0b\u8f7d\u6a21\u677f")),p.a.createElement("div",{className:h.a.contentItem},p.a.createElement(o["a"],V,p.a.createElement(c["a"],null,"\u6279\u91cf\u5bfc\u5165"))),p.a.createElement("p",{className:h.a.contentItem,style:{color:"rgba(0,0,0,0.45)"}},"\u4e0a\u6b21\u65f6\u95f4\uff1a",X()),p.a.createElement("p",{className:h.a.contentItem,style:{marginTop:"100px",textAlign:"center",marginBottom:"50px"}},p.a.createElement(c["a"],{type:"primary",onClick:function(){return ee()}},"\u5b8c\u6210"))),description:p.a.createElement("span",{style:{fontSize:"12px",color:"rgba(0,0,0,0.36)"}},"\u652f\u6301\u6279\u91cf\u5f55\u5165")}],ae=function(){a({type:"controller/getAuthUrl",payload:{companyId:s.companyId},callback:function(e){console.log("getAuthUrl",e),e&&q(e)}}),a({type:"controller/getCompanyAuthResult",payload:{companyId:s.companyId},callback:function(e){console.log("getCompanyAuthResult",e),1===e.isAuthor?(C(!0),O(j+1)):C(!1),1===e.isComplete&&b(!0)}}),a({type:"controller/getImportInfo",payload:{companyId:s.companyId},callback:function(e){console.log("getImportInfo",e),v(e)}})};Object(i["useEffect"])(function(){ae()},[]);var ne=function(){return I?"\u4f60\u7684\u4f01\u4e1a\u5df2\u6210\u529f\u5f00\u901a\u82b1\u5457\u5de5\u4f5c\u82b1\uff0c\u8bf7\u53ca\u65f6\u544a\u77e5\u5458\u5de5\u5230\u946b\u652f\u51fa\u5f00\u901a\u8be5\u4e1a\u52a1\uff0c\u5373\u523b\u4eab\u53d7\u82b1\u5457\u63d0\u989d":"\u5982\u4f60\u5df2\u7ebf\u4e0b\u7b7e\u7ea6\u82b1\u5457\u5de5\u4f5c\u82b1\uff0c\u8bf7\u53ca\u65f6\u626b\u7801\u6388\u6743\uff0c\u5e76\u5f55\u5165\u5458\u5de5\u4fe1\u606f\uff0c\u5458\u5de5\u65b9\u53ef\u6b63\u5e38\u5f00\u901a\u4f7f\u7528"};return p.a.createElement("div",{style:{minHeight:"100%"}},p.a.createElement(E["a"],{title:"\u82b1\u5457\u5de5\u4f5c\u82b1",note:ne()}),p.a.createElement("div",{className:"content-dt",style:{overflowY:"auto",padding:I?"24px 32px":"24px 10%",minHeight:"calc(100% - 120px)"}},p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:I?h.a.hide:""},p.a.createElement(r["a"],{current:j},te.map(function(e){return p.a.createElement(Q,{status:e.status,key:e.title,title:e.title,description:e.description,size:"small"})})),p.a.createElement("div",{className:"steps-content"},te[j].content))),p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:I?"":h.a.hide},p.a.createElement(x["a"],{name:"\u4f01\u4e1a\u652f\u4ed8\u5b9d\u6388\u6743".concat(A?"\u3010\u6388\u6743\u4e2d\u3011":"\u3010\u5df2\u505c\u6b62\u6388\u6743\u3011"),style:{margin:"20px 0 18px"}},p.a.createElement(n["a"],{title:"\u82e5\u8981\u505c\u6b62\u6388\u6743\uff0c\u8bf7\u767b\u5f55\u4f01\u4e1a\u652f\u4ed8\u5b9d\u64cd\u4f5c",className:A?"":h.a.hide},p.a.createElement("i",{className:"iconfont iconIcon-yuangongshouce fs-14 c-black-45 m-l-8"}))),p.a.createElement("div",{style:{marginTop:"18px"}},p.a.createElement("span",{style:{display:"inline-block",padding:"22px",borderRadius:"2px",boxShadow:"0px 0px 6px 0px rgba(29, 17, 86, 0.12)"}},p.a.createElement(g.a,{value:L,size:130}),",")),p.a.createElement("div",{style:{height:"1px",background:"rgba(233,233,233,1)",margin:"66px auto 25px"}}),p.a.createElement(x["a"],{name:"\u6279\u91cf\u5bfc\u5165\u5458\u5de5\u4fe1\u606f"},p.a.createElement("span",{className:"fs-14 c-black-45 fw-400"},"\uff08\u8bf7\u786e\u4fdd\u5bfc\u5165\u6b63\u786e\u7684\u5458\u5de5\u4fe1\u606f\uff0c\u4fe1\u606f\u51c6\u786e\u6027\u5c06\u5f71\u54cd\u82b1\u5457\u63d0\u989d\u989d\u5ea6\uff09")),p.a.createElement("p",{className:h.a.contentItem,style:{marginLeft:0,marginTop:"7px"}},"\u6279\u91cf\u5bfc\u5165\u5458\u5de5\u4fe1\u606f\uff0c\u8bf7\u5148",p.a.createElement("a",{href:"".concat(t,"/cost/export/userInfo/template?token=").concat(localStorage.getItem("token")),style:{color:"#00C795"}},"\u4e0b\u8f7d\u6a21\u677f")),p.a.createElement("p",{className:"".concat(h.a.testMessageRed," ").concat(W?"":h.a.hide),style:{marginLeft:0,marginTop:0,marginBottom:"16px"}},p.a.createElement("span",{className:h.a.btn},"x"),p.a.createElement("span",{style:{fontWeight:"400"}},"\u6210\u529f\u5bfc\u5165 ",H,"\u6761\uff0c\u5931\u8d25 ",J,"\u6761\xa0\xa0\xa0"),p.a.createElement("a",{href:"".concat(t,"/cost/export/userInfo/failData?failFileId=").concat(W,"&token=").concat(localStorage.getItem("token")),style:{color:"#00C795"}},"\u5bfc\u51fa\u5931\u8d25\u6570\u636e")),p.a.createElement("div",{className:h.a.contentItem,style:{marginLeft:0,marginTop:0}},p.a.createElement(o["a"],V,p.a.createElement(c["a"],null,"\u6279\u91cf\u5bfc\u5165"))),p.a.createElement("p",{className:h.a.contentItem,style:{marginLeft:0,color:"rgba(0,0,0,0.45)"}},"\u4e0a\u6b21\u65f6\u95f4\uff1a",X())))))}var _=function(e){return{removeDataTime:e.controller.removeDataTime,userInfo:e.session.userInfo,synCompanyTime:e.controller.synCompanyTime,queryUsers:e.controller.queryUsers,modifyGrant:e.controller.modifyGrant,getCompanyAuthResult:e.controller.getCompanyAuthResult,getAuthUrl:e.controller.getAuthUrl}};t["default"]=Object(u["c"])(_)(b)},ZaSK:function(e,t,a){e.exports={app_header:"app_header___wGF_9",formItem:"formItem___2LSls","content-dt":"content-dt___1wouJ",testMessage:"testMessage___qUez9",btn:"btn___1pjqt",testMessageRed:"testMessageRed___9kJ06",link:"link___2i2A9",contentItem:"contentItem___28z8z",hide:"hide___1NsKt"}}}]);