(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[80],{KsSw:function(e,t,n){"use strict";n.r(t);n("g9YV");var a,r,o,i=n("wCAj"),c=(n("+L6B"),n("2/Rp")),s=(n("P2fV"),n("NJEC")),l=n("p0pE"),u=n.n(l),p=(n("miYZ"),n("tsqr")),d=n("2Taf"),f=n.n(d),y=n("vZ4D"),h=n.n(y),m=n("rlhR"),g=n.n(m),v=n("MhPg"),w=n.n(v),N=n("l4Ni"),S=n.n(N),k=n("ujKo"),C=n.n(k),E=(n("2qtc"),n("kLXV")),I=n("q1tI"),z=n.n(I),R=n("wd/R"),q=n.n(R),x=n("/MKj"),Q=n("jwRn"),D=n("KtMI"),O=n("9bK2");function j(e){var t=J();return function(){var n,a=C()(e);if(t){var r=C()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return S()(this,n)}}function J(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var K=E["a"].confirm,L=(a=Object(x["c"])(function(e){var t=e.loading,n=e.setUser;return{loading:t.effects["setUser/list"]||!1,list:n.list,role:n.role,query:n.query,total:n.total,userIdList:n.userIdList}}),a((o=function(e){w()(n,e);var t=j(n);function n(){var e;f()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),e.onDelete=function(t){var n=e.props,a=n.query,r=n.dispatch;r({type:"setUser/delRole",payload:{id:t}}).then(function(){p["a"].success("\u5220\u9664\u6210\u529f"),e.onQuery(u()({},a))})},e.onQuery=function(t){var n=e.props.match.params.id||"",a=u()({},t,{id:n});e.props.dispatch({type:"setUser/list",payload:a})},e.handleClick=function(){var t=g()(e),n=e.props,a=n.dispatch,r=n.query,o=e.props.match.params.id||"";e.props.dispatch({type:"setUser/userIdList",payload:{id:o}}).then(function(){var n=e.props.userIdList;Object(Q["a"])(n,function(e){var n=[];e.forEach(function(e){n.push({userId:e.emplId,name:e.name})}),n&&n.length>0&&a({type:"setUser/add",payload:{userJson:JSON.stringify(n),id:o}}).then(function(){t.onQuery(u()({},r))})},{multiple:!0})})},e.again=function(){K({title:"\u786e\u8ba4\u5c06\u9489\u9489\u5df2\u8bbe\u7f6e\u597d\u7684\u5ba1\u6279\u89d2\u8272\uff0c\u540c\u6b65\u81f3\u946b\u652f\u51fa\u5417\uff1f",content:"\u5982\u89d2\u8272\u540d\u79f0\u91cd\u590d\uff0c\u540c\u6b65\u540e\uff0c\u4f1a\u8986\u76d6\u73b0\u6709\u89d2\u8272\u540d\u79f0\u3001\u4eba\u5458\u3001\u7ba1\u7406\u8303\u56f4",okText:"\u7ee7\u7eed\u540c\u6b65",onOk:function(){e.props.dispatch({type:"auth/syncApproveRole",payload:{}}).then(function(){p["a"].success("\u6570\u636e\u540c\u6b65\u4e2d\uff0c\u8bf7\u7a0d\u540e\u67e5\u770b");var t=e.props.query;e.onQuery({pageNo:1,pageSize:t.pageSize})})},onCancel:function(){console.log("Cancel")}})},e.onOk=function(){e.onQuery({pageNo:1,pageSize:10})},e}return h()(n,[{key:"componentDidMount",value:function(){var e=this.props.query;this.onQuery({pageNo:1,pageSize:e.pageSize})}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.query,r=t.role,o=t.total,l=[{title:"\u4eba\u5458",dataIndex:"userName"},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"createTime",render:function(e){return z.a.createElement("span",null,e&&q()(e).format("YYYY-MM-DD"))}},{title:"\u64cd\u4f5c",dataIndex:"ope",render:function(t,n){return z.a.createElement(s["a"],{title:"\u786e\u8ba4\u5220\u9664\u8be5\u4eba\u5458\u5417?",onConfirm:function(){return e.onDelete(n.id)}},z.a.createElement("span",{className:"deleteColor",id:n.id},"\u5220\u9664"))},width:"80px",className:"fixCenter"}];return z.a.createElement("div",null,z.a.createElement(D["a"],{title:r.roleName,note:r.note}),z.a.createElement("div",{className:"content-dt",style:{height:"auto"}},z.a.createElement("div",{style:{display:"flex"}},z.a.createElement(c["a"],{type:"primary",style:{marginBottom:"15px"},onClick:this.handleClick},"\u65b0\u589e\u4eba\u5458"),z.a.createElement(O["default"],{onOk:this.onOk,roleId:r.id},z.a.createElement(c["a"],{type:"default",className:"m-l-8"},"\u540c\u6b65\u9489\u9489\u89d2\u8272"))),z.a.createElement(i["a"],{columns:l,dataSource:n,rowKey:"id",pagination:{current:a.pageNo,onChange:function(t){e.onQuery({pageNo:t,pageSize:a.pageSize})},size:"small",showTotal:function(){return"\u5171".concat(o,"\u6761\u6570\u636e")},showSizeChanger:!0,showQuickJumper:!0,total:o,onShowSizeChange:function(t,n){e.onQuery({pageNo:t,pageSize:n})}}})))}}]),n}(z.a.PureComponent),r=o))||r);t["default"]=L}}]);