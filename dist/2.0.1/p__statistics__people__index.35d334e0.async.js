(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[64],{"0tk8":function(e,t,a){"use strict";a.r(t);a("g9YV");var n=a("wCAj"),r=(a("BoS7"),a("Sdc0")),l=(a("y8nQ"),a("Vl3Y")),o=(a("7Kak"),a("9yH6")),c=(a("qVdP"),a("jsC+")),i=(a("+L6B"),a("2/Rp")),s=(a("Pwec"),a("CtXQ")),u=(a("lUTK"),a("BvKs")),p=(a("5Dmo"),a("3S7+")),d=a("p0pE"),m=a.n(d),f=a("2Taf"),h=a.n(f),y=a("vZ4D"),g=a.n(y),v=a("MhPg"),S=a.n(v),E=a("l4Ni"),T=a.n(E),C=a("ujKo"),w=a.n(C),b=(a("iQDF"),a("+eQT")),x=a("q1tI"),N=a.n(x),k=a("/MKj"),I=a("PeHD"),O=a("wd/R"),V=a.n(O),j=a("4/ND"),Q=a("VVR3"),D=(a("2qtc"),a("kLXV")),R=a("qIgq"),Y=a.n(R),L=a("l59Y"),q=a("e9Pg"),z=a.n(q),P=a("ydnR");function M(e){var t=e.children,a=e.lists,r=e.onQuery,l=e.id,o=e.query,c=e.total,i=e.projectType,s=Object(x["useState"])(!1),u=Y()(s,2),d=u[0],m=u[1],f=Object(x["useState"])(""),h=Y()(f,2),y=h[0],g=h[1],v=[{title:"\u5e8f\u53f7",dataIndex:"index",width:80,render:function(e,t,a){return N.a.createElement("span",null,a+1)},fixed:"left"},{title:"\u4e8b\u7531",dataIndex:"reason",width:150,render:function(e,t){return N.a.createElement(L["a"],{id:t.invoiceSubmitId,templateType:0},N.a.createElement("span",null,N.a.createElement(p["a"],{placement:"topLeft",title:t.reason||""},N.a.createElement("a",{className:"eslips-2"},t.reason))))},fixed:"left"},{title:"\u91d1\u989d(\u5143)",dataIndex:"submitSum",render:function(e){return N.a.createElement("span",null,e&&e/100)},className:"moneyCol",width:140},{title:"\u5355\u53f7",dataIndex:"invoiceNo",width:160},{title:"\u5355\u636e\u7c7b\u578b",dataIndex:"invoiceTemplateName",width:160},{title:"\u63d0\u4ea4\u4eba",dataIndex:"createName",width:150},{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"createTime",render:function(e,t){return N.a.createElement("span",null,t.createTime?V()(t.createTime).format("YYYY-MM-DD"):"-")},width:150},{title:"\u5355\u636e\u72b6\u6001",dataIndex:"statusStr",width:100,render:function(e,t){return N.a.createElement("span",null,t.statusStr||Object(P["z"])(t.status,P["C"]))}}],S=function(e){g(e),r({pageNo:1,pageSize:10,id:l,projectType:i,searchContent:e})};return N.a.createElement("span",null,N.a.createElement("span",{onClick:function(){r({pageNo:1,pageSize:10,id:l,projectType:i}),m(!0)}},t),N.a.createElement(D["a"],{title:"\u5355\u636e\u5217\u8868",visible:d,onCancel:function(){g(""),m(!1)},footer:null,width:"980px",bodyStyle:{height:"470px",overflowY:"scroll"}},N.a.createElement(z.a,{placeholder:"\u8bf7\u8f93\u5165\u5355\u53f7\u3001\u4e8b\u7531\u3001\u6536\u6b3e\u4eba",style:{width:"292px",marginRight:"20px",marginBottom:"16px"},onSearch:function(e){return S(e)},value:y,onInput:function(e){return g(e.target.value)}}),N.a.createElement(n["a"],{dataSource:a,columns:v,rowKey:"invoiceSubmitId",scroll:{y:"280px",x:"1090px"},pagination:{current:o.pageNo,hideOnSinglePage:!0,onChange:function(e){console.log("onChange"),r({pageNo:e,pageSize:o.pageSize,id:l,projectType:i,searchContent:y})},total:c,size:"small",showTotal:function(){return"\u5171".concat(c,"\u6761\u6570\u636e")},showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:function(e,t){console.log("\u7ffb\u9875"),r({pageNo:e,pageSize:t,id:l,projectType:i,searchContent:y})}}})))}var B,K,A,J,_=M,F=(a("14J3"),a("BMrR")),H=(a("jCWc"),a("kPKH")),W=a("jehZ"),U=a.n(W),X=a("eHn4"),Z=a.n(X),G=a("d6i3"),$=a.n(G),ee=a("1l/V"),te=a.n(ee),ae=a("svdq");function ne(e){var t=re();return function(){var a,n=w()(e);if(t){var r=w()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return T()(this,a)}}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var le,oe,ce,ie=(B=l["a"].create(),K=Object(k["c"])(function(e){var t=e.global;return{costCategoryList:t.costCategoryList,invoiceList:t.invoiceList,projectList:t.projectList,supplierList:t.supplierList}}),B(A=K((J=function(e){S()(a,e);var t=ne(a);function a(e){var n;return h()(this,a),n=t.call(this,e),n.onShow=te()($.a.mark(function e(){var t,a,r;return $.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=n.props.details,t&&(a=t.userVOS,r=t.deptVos,n.setState({userVOS:a,deptVos:r})),n.setState({visible:!0});case 3:case"end":return e.stop()}},e)})),n.onSubmit=function(){var e=n.state,t=e.userVOS,a=e.deptVos;n.props.form.validateFieldsAndScroll(function(e){if(!e){var r={userVOS:t,deptVos:a};n.onCancel(),n.props.onOk(r)}})},n.selectPle=function(e,t){"user"===t?n.setState(Z()({},"".concat(t,"VOS"),e.users||[])):n.setState(Z()({},"".concat(t,"Vos"),e.depts||[]))},n.onReset=function(){n.setState({userVOS:[],deptVos:[]}),n.props.form.resetFields()},n.onCancel=function(){n.onReset(),n.setState({visible:!1})},n.state={visible:!1,userVOS:[],deptVos:[]},n}return g()(a,[{key:"render",value:function(){var e=this,t=this.props.children,a={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}}},n=this.state,r=n.visible,o=n.userVOS,c=n.deptVos;return console.log("LevelSearch -> render -> deptVos",c),N.a.createElement("span",null,N.a.createElement("span",{onClick:this.onShow},t),N.a.createElement(D["a"],{title:"\u9ad8\u7ea7\u641c\u7d22",visible:r,onCancel:this.onCancel,width:"680px",bodyStyle:{height:"373px",overflowY:"scroll"},footer:N.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},N.a.createElement(i["a"],{key:"reset",onClick:function(){return e.onReset()}},"\u91cd\u7f6e"),N.a.createElement("div",null,N.a.createElement(i["a"],{key:"cancel",onClick:function(){return e.onCancel()}},"\u53d6\u6d88"),N.a.createElement(i["a"],{type:"primary",key:"save",onClick:function(){return e.onSubmit()}},"\u786e\u5b9a")))},N.a.createElement(l["a"],{className:"formItem"},N.a.createElement(F["a"],null,N.a.createElement(H["a"],{span:12},N.a.createElement(l["a"].Item,U()({label:"\u63d0\u4ea4\u4eba"},a),N.a.createElement(ae["a"],{users:o||[],placeholder:"\u8bf7\u9009\u62e9",onSelectPeople:function(t){return e.selectPle(t,"user")},invalid:[],disabled:!1,flag:"users"}))),N.a.createElement(H["a"],{span:12},N.a.createElement(l["a"].Item,U()({label:"\u90e8\u95e8"},a),N.a.createElement(ae["a"],{depts:c||[],placeholder:"\u8bf7\u9009\u62e9",onSelectPeople:function(t){return e.selectPle(t,"dept")},invalid:[],disabled:!1,flag:"dept"})))))))}}]),a}(x["Component"]),A=J))||A)||A),se=ie,ue=a("wxJl"),pe=a.n(ue);function de(e){var t=me();return function(){var a,n=w()(e);if(t){var r=w()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return T()(this,a)}}function me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var fe=function(e,t){var a=new Date(e,t,"0");return a.getDate()},he=Object(I["a"])((new Date).getTime()).split("-"),ye="".concat(he[0],"-").concat(he[1],"-01 00:00:00"),ge="".concat(he[0],"-").concat(he[1],"-").concat(fe(he[0],he[1])," 23:59:59"),ve=b["a"].MonthPicker,Se=(le=Object(k["c"])(function(e){var t=e.peopleS,a=e.loading;return{loading:a.effects["peopleS/list"]||!1,list:t.list,query:t.query,total:t.total,querys:t.querys,totals:t.totals,detailList:t.detailList}}),le((ce=function(e){S()(a,e);var t=de(a);function a(e){var n;return h()(this,a),n=t.call(this,e),n.onChangeType=function(e){var t=Number(e.target.value);console.log("StaticChart -> onChangeType -> date",t),n.setState({dateType:e.target.value}),0===t?n.monthChage(n.state.defaultMonth):1===t?n.getQuarter(n.state.defaultQuarter,!0):n.yearChange(n.state.defaultYear)},n.getQuarter=function(e,t){if(!t){var a=e.getFullYear(),r=e.getMonth()+1;return r<=3?"".concat(a,"-01~").concat(a,"-03"):r<=6?"".concat(a,"-04~").concat(a,"-06"):r<=9?"".concat(a,"-07~").concat(a,"-09"):"".concat(a,"-10~").concat(a,"-12")}var l="".concat(e.split("~")[0],"-01 00:00:00"),o=e.split("~")[1]+("06"===e.split("~")[1].split("-")[1]||"09"===e.split("~")[1].split("-")[1]?"-30 23:59:59":"-31 23:59:59"),c=new Date(l).getTime(),i=new Date(o).getTime();n.setState({startTime:c,endTime:i},function(){n.onQuery({})})},n.yearChange=function(e){var t="".concat(e,"-01-01 00:00:00"),a="".concat(e,"-12-31 23:59:59"),r=new Date(t).getTime(),l=new Date(a).getTime();n.setState({startTime:r,endTime:l},function(){n.onQuery({})})},n.monthChage=function(e){var t="".concat(e,"-01 00:00:00"),a="".concat(e,"-").concat(fe(e.split("-")[0],e.split("-")[1])," 23:59:59"),r=new Date(t).getTime(),l=new Date(a).getTime();n.setState({startTime:r,endTime:l},function(){n.onQuery({})})},n.quarterChage=function(e){n.getQuarter(e,!0)},n.onOk=function(e){n.setState({levelSearch:e},function(){n.onQuery({})})},n.onQuery=function(e){var t=n.state,a=t.startTime,r=t.endTime,l=t.dateType,o=t.levelSearch,c=t.sortType;Object.assign(e,m()({startTime:a,endTime:r,dateType:Number(l)},o,{sortType:c})),n.props.dispatch({type:"peopleS/list",payload:e})},n.inVoiceQuery=function(e){var t=n.state,a=t.startTime,r=t.endTime,l=t.dateType,o=t.levelSearch;Object.assign(e,m()({startTime:a,endTime:r,dateType:Number(l)},o,{searchUserId:-1===e.id?"":e.id})),e.id&&delete e.id,n.props.dispatch({type:"peopleS/detailList",payload:e})},n.onExport=function(e){var t={},a=n.state,r=a.startTime,l=a.endTime,o=a.dateType,c=a.levelSearch,i=a.sortType;Object.assign(t,m()({startTime:r,endTime:l,dateType:Number(o)},c,{sortType:i})),"3"===e.key&&Object.assign(t,{isAll:!0}),n.props.dispatch({type:"peopleS/export",payload:t})},n.handleChange=function(e,t,a){console.log(e,t,a);var r=n.state.sortType,l="";"ascend"===a.order?l=1:"descend"===a.order&&(l=2),l!==r?n.setState({sortType:l},function(){n.onQuery({pageNo:1,pageSize:e.pageSize})}):n.onQuery({pageNo:e.current,pageSize:e.pageSize})},n.onCheck=function(e){var t=100;e&&(t=1e6),n.setState({changeMoney:t})},n.state={startTime:new Date(ye).getTime(),endTime:new Date(ge).getTime(),dateType:0,defaultQuarter:n.getQuarter(new Date),defaultMonth:"".concat(he[0],"-").concat(he[1]),defaultYear:he[0],levelSearch:{},sortType:2,changeMoney:100},n}return g()(a,[{key:"componentDidMount",value:function(){this.onQuery({})}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,d=t.list,m=t.detailList,f=t.query,h=t.total,y=t.querys,g=t.totals,v=this.state,S=v.dateType,E=v.defaultYear,T=v.defaultQuarter,C=v.defaultMonth,w=v.levelSearch,b=v.changeMoney,x=[{title:"\u59d3\u540d",dataIndex:"userName",width:80,render:function(e,t){return N.a.createElement("span",{style:{fontWeight:-1===t.userId?"bolder":"normal"}},t.userName)}},{title:"\u91d1\u989d\uff08".concat(b>102?"\u4e07\u5143":"\u5143","\uff09"),dataIndex:"submitSumAll",sorter:!0,defaultSortOrder:"descend",render:function(t,a){return N.a.createElement(_,{lists:m,onQuery:e.inVoiceQuery,deptId:a.deptId,query:f,total:h,id:a.userId},N.a.createElement("a",null,"\xa5",a.submitSum?(a.submitSum/b).toFixed(2):0))},className:"moneyCol",width:80},{title:N.a.createElement("span",null,N.a.createElement("span",{className:"m-r-8"},"\u73af\u6bd4\u589e\u957f"),N.a.createElement(p["a"],{title:"\u73af\u6bd4\u4e0a\u6708/\u4e0a\u5b63\u5ea6/\u4e0a\u5e74\u5ea6\u7684\u589e\u957f\u7387"},N.a.createElement("i",{className:"iconfont iconIcon-yuangongshouce fs-16"}))),dataIndex:"annulus",width:100,render:function(e,t){return N.a.createElement("span",{className:"icons"},null===t.annulusSymbolType&&"-",null!==t.annulusSymbolType&&N.a.createElement("span",null,N.a.createElement("i",{className:"iconfont ".concat(t.annulusSymbolType?"iconxiajiang":"iconshangsheng")}),t.annulus,null===t.annulusSymbolType?"":"%"))}},{title:N.a.createElement("span",{className:"icons"},N.a.createElement("span",{className:"m-r-8"},"\u540c\u6bd4\u589e\u957f"),N.a.createElement(p["a"],{title:"\u540c\u6bd4\u53bb\u5e74\u540c\u6708/\u540c\u5b63\u5ea6/\u4e0a\u5e74\u5ea6\u7684\u589e\u957f\u7387"},N.a.createElement("i",{className:"iconfont iconIcon-yuangongshouce fs-16"}))),dataIndex:"yearOnYear",width:100,render:function(e,t){return N.a.createElement("span",null,null===t.yearOnYearSymbolType&&"-",null!==t.yearOnYearSymbolType&&N.a.createElement("span",{className:"icons"},N.a.createElement("i",{className:"iconfont ".concat(t.yearOnYearSymbolType?"iconxiajiang":"iconshangsheng")}),t.yearOnYear,null===t.yearOnYearSymbolType?"":"%"))}},{title:"\u660e\u7ec6\u6570",dataIndex:"categoryCountAll",width:100}];return N.a.createElement("div",{className:"content-dt"},N.a.createElement("div",{className:"cnt-header"},N.a.createElement("div",{className:"head_lf",style:{display:"flex"}},N.a.createElement(c["a"],{overlay:N.a.createElement(u["a"],{onClick:function(t){return e.onExport(t)}},N.a.createElement(u["a"].Item,{key:"2"},N.a.createElement("span",{className:"pd-20-9 c-black-65"},"\u5bfc\u51fa\u9ad8\u7ea7\u641c\u7d22\u7ed3\u679c")),N.a.createElement(u["a"].Item,{key:"3"},N.a.createElement("span",{className:"pd-20-9 c-black-65"},"\u5bfc\u51fa\u5168\u90e8"))),overlayClassName:pe.a.menuBtn},N.a.createElement(i["a"],null,"\u5bfc\u51fa ",N.a.createElement(s["a"],{type:"down"}))),N.a.createElement(l["a"],{style:{display:"flex",marginLeft:"8px"}},N.a.createElement("p",{style:{lineHeight:"32px",marginBottom:0}},"\u63d0\u4ea4\u65f6\u95f4\uff1a"),N.a.createElement(o["a"].Group,{className:"m-r-8",value:S,onChange:function(t){return e.onChangeType(t)}},N.a.createElement(o["a"].Button,{value:0},"\u6708\u5ea6"),N.a.createElement(o["a"].Button,{value:1},"\u5b63\u5ea6"),N.a.createElement(o["a"].Button,{value:2},"\u5e74\u5ea6")),2===S&&N.a.createElement(j["a"],{onChange:function(t){return e.yearChange(t)},defaultValue:E})||0===S&&N.a.createElement(ve,{allowClear:!1,onChange:function(t,a){return e.monthChage(a)},defaultValue:V()(C)})||1===S&&N.a.createElement(Q["a"],{onChange:function(t){return e.quarterChage(t)},value:T}))),N.a.createElement("div",{className:"head_rg",style:{cursor:"pointer",verticalAlign:"middle",display:"flex"}},N.a.createElement(r["a"],{className:"m-r-32",checkedChildren:"\u4e07\u5143",unCheckedChildren:"\u5143",onChange:function(t){return e.onCheck(t)}}),N.a.createElement(se,{onOk:this.onOk,details:w},N.a.createElement("div",{className:"head_rg",style:{cursor:"pointer",verticalAlign:"middle",display:"flex"}},N.a.createElement("div",null,N.a.createElement(s["a"],{className:"sub-color m-r-8",type:"filter"})),N.a.createElement("span",{className:"fs-14 sub-color"},"\u9ad8\u7ea7\u641c\u7d22"))))),N.a.createElement(n["a"],{dataSource:d,loading:a,columns:x,rowKey:"userId",pagination:{current:y.pageNo,total:g,size:"small",showTotal:function(){return"\u5171".concat(g,"\u6761\u6570\u636e")},showSizeChanger:!0,showQuickJumper:!0},onChange:this.handleChange}))}}]),a}(x["Component"]),oe=ce))||oe);t["default"]=Se},wxJl:function(e,t,a){e.exports={menuBtn:"menuBtn___18R9W"}}}]);