(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{on3l:function(e,t,n){"use strict";n.r(t);n("g9YV");var a,r,o,c=n("wCAj"),i=(n("+L6B"),n("2/Rp")),l=(n("/zsF"),n("PArb")),s=(n("P2fV"),n("NJEC")),d=(n("5Dmo"),n("3S7+")),p=n("p0pE"),u=n.n(p),f=(n("miYZ"),n("tsqr")),m=n("2Taf"),h=n.n(m),y=n("vZ4D"),v=n.n(y),E=n("MhPg"),g=n.n(E),w=n("l4Ni"),N=n.n(w),k=n("ujKo"),x=n.n(k),I=n("q1tI"),S=n.n(I),b=n("/MKj"),D=n("2g+w"),L=n("I0Kt"),R=n("KtMI"),j=n("kdNf");function C(e){var t=O();return function(){var n,a=x()(e);if(t){var r=x()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return N()(this,n)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var V=(a=Object(b["c"])(function(e){var t=e.companySet,n=e.loading;return{list:t.list,loading:n.effects["companySet/list"]||!1,addLoading:n.effects["companySet/add"]||n.effects["companySet/edit"]||!1}}),a((o=function(e){g()(n,e);var t=C(n);function n(){var e;h()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),e.getSort=function(t,n){var a=e.openTree(t,[]);e.props.dispatch({type:"companySet/sort",payload:{sortList:a}}).then(function(){f["a"].success("\u6392\u5e8f\u6210\u529f!"),e.onQuery({}),n()})},e.openTree=function(t,n){for(var a=n,r=0;r<t.length;r++){var o=t[r];if(o.children&&o.children.length){var c=e.openTree(o.children,a);o.children="",a.concat(c)}a.push(o)}return a},e.sortData=function(t){for(var n=0;n<t.length;n++){var a=t[n];a.children&&a.children.length&&e.sortData(a.children)}t.sort(function(e,t){return e.sort-t.sort})},e.onDeletes=function(t){e.props.dispatch({type:"companySet/del",payload:{id:t}}).then(function(){e.onQuery({})})},e.onOk=function(t,n){var a=t.id?"companySet/edit":"companySet/add",r=t.id?"\u7f16\u8f91\u6210\u529f":"\u65b0\u589e\u6210\u529f";e.props.dispatch({type:a,payload:u()({},t)}).then(function(){f["a"].success(r),e.onQuery({}),n()})},e.onQuery=function(t){e.props.dispatch({type:"companySet/list",payload:t})},e}return v()(n,[{key:"componentDidMount",value:function(){this.onQuery({})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.list,r=t.addLoading,o=a.map(function(e){return u()({},e,{name:e.officeName})}),p=Object(D["a"])({rootId:0,pId:"parentId",name:"officeName",otherKeys:["note","sort","id","parentId","officeName","officeNo","parentName","userVos","deptVos"]},a);this.sortData(p);var f=[{title:"\u516c\u53f8\u540d\u79f0",dataIndex:"officeName",width:120,ellipsis:!0,textWrap:"word-break",render:function(e){return S.a.createElement(d["a"],{title:e||"",placement:"topLeft"},e)}},{title:"\u516c\u53f8\u7f16\u53f7",dataIndex:"officeNo",width:100,ellipsis:!0,textWrap:"word-break",render:function(e){return e?S.a.createElement(d["a"],{title:e||"",placement:"topLeft"},e):"-"}},{title:"\u4e0a\u7ea7\u516c\u53f8",dataIndex:"parentName",width:100,ellipsis:!0,textWrap:"word-break",render:function(e){return e?S.a.createElement(d["a"],{title:e||"",placement:"topLeft"},e):"-"}},{title:"\u5173\u8054\u90e8\u95e8/\u4eba\u5458",dataIndex:"userVoss",width:100,ellipsis:!0,textWrap:"word-break",render:function(e,t){var n=t.deptVos.map(function(e){return e.name}).join(","),a=t.userVos.map(function(e){return e.name}).join(",");return S.a.createElement(d["a"],{title:"".concat(n," ").concat(a)||"",placement:"topLeft"},S.a.createElement("span",null,n," ",a))}},{title:"\u5907\u6ce8",dataIndex:"note",width:100,render:function(e){return S.a.createElement("span",null,S.a.createElement(d["a"],{title:e||"",placement:"topLeft"},S.a.createElement("span",{className:"eslips-2"},e)))}},{title:"\u64cd\u4f5c",dataIndex:"ope",render:function(t,n){return S.a.createElement("div",null,0!==n.parentId?S.a.createElement(s["a"],{title:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",onConfirm:function(){return e.onDeletes(n.id)}},S.a.createElement("span",{className:"deleteColor"},"\u5220\u9664")):S.a.createElement("span",{className:"fs-14 c-black-45"},"\u5220\u9664"),S.a.createElement(l["a"],{type:"vertical"}),S.a.createElement(j["default"],{onOk:e.onOk,details:n,list:a,loading:r},S.a.createElement("a",null,"\u7f16\u8f91")))},className:"fixCenter",width:80}];return S.a.createElement("div",{className:"mainContainer"},S.a.createElement(R["a"],{title:"\u5206\u516c\u53f8\u7ba1\u7406",note:"1.\u9488\u5bf9\u4e00\u4e2a\u7ec4\u7ec7\u67b6\u6784\u5b58\u5728\u591a\u4e2a\u5206/\u5b50\u516c\u53f8\uff0c\u652f\u6301\u7ba1\u7406\u548c\u7edf\u8ba1\u5404\u5206\u516c\u53f8\u7684\u652f\u51fa\u3002 2.\u8bbe\u7f6e\u597d\u5206\u516c\u53f8\u4e0e\u5404\u90e8\u95e8\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u5373\u53ef\u6309\u5404\u5206\u516c\u53f8\u7eac\u5ea6\u67e5\u770b\u652f\u51fa\u6570\u636e\u3002"}),S.a.createElement("div",{className:"content-dt"},S.a.createElement("div",{className:"cnt-header"},S.a.createElement("div",{className:"head_lf"},S.a.createElement(j["default"],{onOk:this.onOk,title:"add",list:a,loading:r},S.a.createElement(i["a"],{style:{marginRight:"8px"},type:"primary"},"\u65b0\u589e\u516c\u53f8"))),S.a.createElement("div",null,S.a.createElement(L["a"],{list:o,callback:this.getSort},S.a.createElement(i["a"],{type:"default"},"\u6392\u5e8f")))),S.a.createElement(c["a"],{rowKey:"id",loading:n,columns:f,dataSource:p,pagination:!1,defaultExpandAllRows:!0})))}}]),n}(I["Component"]),r=o))||r);t["default"]=V}}]);